{"version":3,"file":"initialization.js","sourceRoot":"","sources":["../../../../../src/shim/autoCollection/diagnostic-channel/initialization.ts"],"names":[],"mappings":";AAAA,4DAA4D;AAC5D,oFAAoF;;;AAIpF,2CAAuC;AAEvC,MAAM,GAAG,GAAG,mBAAmB,CAAC;AAChC,IAAI,aAAa,GAAG,KAAK,CAAC;AAE1B,SAAgB,gBAAgB;IAC5B,mCAAmC;IACnC,IAAI,CAAC,aAAa,EAAE;QAChB,aAAa,GAAG,IAAI,CAAC;QACrB,8DAA8D;QAC9D,MAAM,UAAU,GAAiC,OAAO,CAAC,+BAA+B,CAAC,CAAC;QAC1F,MAAM,OAAO,GAA2B;YACpC,MAAM,EAAE,UAAU,CAAC,MAAM;YACzB,OAAO,EAAE,UAAU,CAAC,OAAO;YAC3B,OAAO,EAAE,UAAU,CAAC,OAAO;SAC9B,CAAC;QAEF,KAAK,MAAM,GAAG,IAAI,OAAO,EAAE;YACvB,OAAO,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC;YACtB,gBAAM,CAAC,WAAW,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE,iBAAiB,GAAG,SAAS,CAAC,CAAC;SACjE;KACJ;AACL,CAAC;AAjBD,4CAiBC","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\n\r\n// Don't reference modules from these directly. Use only for types.\r\nimport * as DiagChannelPublishers from \"diagnostic-channel-publishers\";\r\nimport { Logger } from \"../../logging\";\r\n\r\nconst TAG = \"DiagnosticChannel\";\r\nlet isInitialized = false;\r\n\r\nexport function enablePublishers() {\r\n    // Only register monkey patchs once\r\n    if (!isInitialized) {\r\n        isInitialized = true;\r\n        // eslint-disable-next-line @typescript-eslint/no-var-requires\r\n        const publishers: typeof DiagChannelPublishers = require(\"diagnostic-channel-publishers\");\r\n        const modules: { [key: string]: any } = {\r\n            bunyan: publishers.bunyan,\r\n            console: publishers.console,\r\n            winston: publishers.winston,\r\n        };\r\n\r\n        for (const mod in modules) {\r\n            modules[mod].enable();\r\n            Logger.getInstance().info(TAG, `Subscribed to ${mod} events`);\r\n        }\r\n    }\r\n}\r\n"]}